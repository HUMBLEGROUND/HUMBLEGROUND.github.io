---
layout: post
title: "[React] Axios post Error (Request failed with status code 404 axios post error)"
subtitle: Axios post / fetch post / cors error / proxy
categories: error
tags: [ë¦¬ì•¡íŠ¸]
---

![](https://velog.velcdn.com/images/-__-/post/f67489a5-c51a-47ae-ae37-9e69d95cd1ae/image.png)

## ì°¾ì•„ë³´ê²Œëœ ì´ìœ  ğŸ§

Node.js ì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ë¥¼ ë§Œë“¤ê³ 

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ **Axios** ë¥¼ í™œìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ê°œë°œì„ ì§„í–‰í•˜ëŠ”ë°

**Postman** ìœ¼ë¡œëŠ” í†µì‹ ì´ ì˜ë˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” í˜¸ì¶œì´ ì•ˆë˜ëŠ” í˜„ìƒ

ğŸ‘‰ **'CORS'** ì—ëŸ¬ ë°œìƒ<br>
ğŸ‘‰ **'CORS'** policy ì˜¤ë¥˜ CORS ì •ì±…ì„ ìœ„ë°˜í•  ë•Œ ë°œìƒ<br>
(êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ (Cross-Origin Resource Sharing, CORS)

> - http://localhost:3000 (í´ë¼ì´ì–¸íŠ¸)<br>
> - http://localhost:8080 (ì„œë²„)

---

## í•´ê²° ë°©ë²• ğŸ˜

**JavaScript** ë¥¼ ì´ìš©í•  ê²½ìš° ë„ë©”ì¸ê³¼ í¬íŠ¸ê°€ ë™ì¼í•´ì•¼í•œë‹¤<br>
corsëŠ” ë‹¤ë¥¸ origin ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì‹¶ì„ ë•Œ<br>
corsì˜ í‘œì¤€ì„ ì§€ì¼œ ë‹¤ë¥¸ origin ë„ í—ˆìš©í•´ì£¼ëŠ” ê²ƒì´ë‹¤

> â­ ë³´í†µì€ ì„œë²„(ë°±ì—”ë“œ) ì—ì„œ í•´ê²°í•´ì•¼í•˜ëŠ” ë¬¸ì œë‹¤

### 1. node.js ì—ì„œ 'cors ë¯¸ë“¤ì›¨ì–´' ì¶”ê°€ (ì„±ê³µí•œ ë°©ë²•)

1-1. `npm install cors` ëª…ë ¹ì–´ë¡œ **'cors'** ì„¤ì¹˜ (ì„œë²„íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œì—)

1-2. **'cors'** ë¥¼ require í•´ì£¼ê³  ì½”ë“œ ì¶”ê°€

![](https://velog.velcdn.com/images/-__-/post/d20e02ff-19e0-4dbc-a9b0-3122d296ee64/image.png)

> ğŸ‘† ì½”ë“œ ë‹¨ ë‘ì¤„ë§Œìœ¼ë¡œ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤ â—

---

### 2. package.json ì—ì„œ proxy ì„¤ì • (ì‹¤íŒ¨í•œ ë°©ë²•)

2-1. `axios` ë¡œ í˜¸ì¶œí•  urlì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê³ <br>
package.jsonì—ì„œ proxy ì— ì¶”ê°€í•´ì¤€ë‹¤

2-2. urlì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê³  `axios` ë¡œ ë‹¤ì‹œ í˜¸ì¶œ

![](https://velog.velcdn.com/images/-__-/post/c70c33c2-fbb4-46fc-bb22-210e58263148/image.png)

---

### 3. http-proxy-middleware ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì‹¤íŒ¨í•œ ë°©ë²•)

3-1. `npm install http-proxy-middleware` ëª…ë ¹ì–´ë¡œ **'proxy'** ë¯¸ë“¤ì›¨ì–´ ì„¤ì¹˜

3-2. `src í´ë”` ê²½ë¡œì— **'setupProxy.js'** íŒŒì¼ ìƒì„±

![](https://velog.velcdn.com/images/-__-/post/c44c9d89-deb7-452d-aaea-14096ef12f93/image.png)

3-3. `createProxyMiddleware` ì½”ë“œ ì…ë ¥

```js
const { createProxyMiddleware } = require("http-proxy-middleware");

module.exports = function (app) {
  app.use(
    createProxyMiddleware({
      target: "http://localhost:8080",
      changeOrigin: true,
    })
  );
};
```

---

3-4. urlì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê³  `axios` ë¡œ ë‹¤ì‹œ í˜¸ì¶œí•œë‹¤

![](https://velog.velcdn.com/images/-__-/post/286c8cdd-fa68-4cfd-92da-342d75512e7b/image.png)

---

### ì°¸ê³  í–ˆë˜ ì‚¬ì´íŠ¸ ğŸ–¥

- <https://beomy.github.io/tech/browser/cors/>

- <https://abbo.tistory.com/146>

- <https://woochan-dev.tistory.com/94>

---

### ë°œìƒí–ˆë˜ ì—ëŸ¬ ë‚´ìš©

> POST http://localhost:8080/ net::ERR_CONNECTION_RESET<br>
> POST http://localhost:8080/ net::ERR_FAILED<br>
> 404 (Not Found)<br>
> ResponseÂ {type: 'basic', url: 'http://localhost:3000/', redirected: false, status: 404, ok: false,Â â€¦}<br>
> Uncaught Error: The error you provided does not contain a stack trace.<br>
> Uncaught (in promise) {message: 'Network Error', name: 'AxiosError', code: "ERR_NETWORK", config: {...}, request: XMLHttpRequest, ...}
> Access to XMLHttpRequest at 'http://localhost:8080/' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.
> Uncaught (in promise) TypeError: Failed to fetch
> Uncaught ReferenceError: process is not defined<br>
> Uncaught Error: The error you provided does not contain a stack trace.

---
