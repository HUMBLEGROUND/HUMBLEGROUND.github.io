---
layout: post
title: "[Solidity] NFT Minting whitelist (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸)"
subtitle: ë¯¼íŒ… / whitelist / í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
categories: solidity
tags: [ì†”ë¦¬ë””í‹°]
---

#### NFT whitelist (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸) ë€

NFTë¥¼ êµ¬ë§¤(ë¯¼íŒ…) í• ë•Œ ì•„ë¬´ë‚˜ êµ¬ë§¤í•˜ì§€ ëª»í•˜ë„ë¡<br>
ì¼ì¢…ì˜ 'êµ¬ë§¤ìê²©' ì„ ë¶€ì—¬í•˜ëŠ” ì‹œìŠ¤í…œì´ë‹¤

```solidity
// SPDX-License-Identifier: MIT

pragma solidity ^0.8.7;

import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract MintNFT is ERC721Enumerable, Ownable {

    constructor() ERC721("BlockChainSchool", "BCS") {}

    function mintNFT() public payable {
        require(whitelist[msg.sender] > 0, "Not whitelist."); // í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ìµœì†Œ 1ê°œì´ìƒ í—ˆìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸
        require(msg.value >= 0.1 ether, "Not Enough ETH.") // 0.1 eth ì´ìƒì— íŒë§¤

        uint tokenId = totalSupply() + 1;

        _mint(msg.sender, tokenId);

        whitelist[msg.sender]--; // í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì–‘ ê°ì†Œ

        payable(owner()).transfer(msg.value); // owner ì—ê²Œ eth ì „ì†¡
    }

    // tokenIdì™€ ë©”íƒ€ë°ì´í„° ì—°ê²°ì§“ê¸°
    function setTokenURI(uint _tokenId, string memory _metadataURI) public {
        metadataURIs[_tokenId] = _metadataURI;
    }

    // ë©”íƒ€ë°ì´í„° ì¡°íšŒ
    mapping(uint => string) public metadataURIs;

    function tokenURI(uint _tokenId) public override view returns(string memory) {
        return metadataURIs[_tokenId];
    }
}

    // í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
    mapping(address => uint) whitelist;

    function setWhitelist(address _whitelist, uint _amount) public onlyOwner {
        whitelist[_whitelist] = _amount;
        // í•´ë‹¹ ì£¼ì†Œê°€ ëª‡ê°œê¹Œì§€ ë¯¼íŒ…í• ìˆ˜ ìˆëŠ”ì§€
    }
}
```

> **1.** `openzeppelin` ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ <br>
> ERC721 ì½”ë“œë¥¼ ìƒì†ë°›ì•„ì˜¨ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•œë‹¤
>
> ---
>
> <http://wavescats.github.io/solidity/2022/12/22/sol10.html><br>
> (ğŸ‘† ERC721 ì½”ë“œ ë¶„ì„ ì°¸ê³ )
>
> ---
>
> **2.** `setWhitelist` í•¨ìˆ˜ëŠ” ì»¨íŠ¸ë™íŠ¸ ë°°í¬ì (onlyOwner)ë§Œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤
>
> - mapping ìœ¼ë¡œ whitelist ë¥¼ ìƒì„±í•´ì¤€ë‹¤
> - NFT êµ¬ë§¤ë¥¼ í—ˆìš©í•´ì£¼ë ¤ëŠ” ì‚¬ëŒì˜ ì§€ê°‘ì£¼ì†Œì™€
> - ê·¸ ì§€ê°‘ì£¼ì†Œë¡œ ëª‡ê°œì˜ NFTë¥¼ êµ¬ì…í•  ìˆ˜ ìˆëŠ”ì§€ ì •í•´ì¤€ë‹¤
>
> ---
>
> **3.** `mintNFT` í•¨ìˆ˜ëŠ” ì•„ë¬´ë‚˜ ì‹¤í–‰í•˜ì§€ ëª»í•˜ë„ë¡ require ì¡°ê±´ì„ ê±¸ì–´ì¤€ë‹¤
>
> 1. whitelist ë¡œ 1ê°œ ì´ìƒ êµ¬ë§¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©ë°›ì•˜ëŠ”ì§€ í™•ì¸
> 2. ìµœì†Œ êµ¬ì…ê°€ê²© 0.1 eth ê°€ ìˆëŠ”ì§€ í™•ì¸
>
> ğŸ‘† ì´ ë‘ê°€ì§€ ì¡°ê±´ì„ í†µê³¼ í•˜ë©´ NFTë¥¼ êµ¬ì…(ë¯¼íŒ…) í•  ìˆ˜ ìˆë‹¤
>
> ---
>
> **4.** ì¡°ê±´ì„ í†µê³¼í•˜ê³  NFTë¥¼ ë¯¼íŒ…í•˜ê²Œ ë˜ë©´
>
> - whitelist ì—ì„œ í—ˆìš©ëœ ìˆ˜ë¥¼ ê°ì†Œ ì‹œì¼œì¤€ë‹¤
> - 0.1 eth ë¡œ íŒë§¤ëœ ê¸ˆì•¡ì€ owner ì—ê²Œ ë°”ë¡œì „ì†¡ëœë‹¤

---

#### NFT whitelist ì½”ë“œ

[NFT í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì½”ë“œ](https://github.com/wavescats/BCS_1st-TIL/blob/main/NFT/04_WhiteList.sol)
