---
layout: post
title: "[typescript] ë¦¬ì•¡íŠ¸ì—ì„œ NFT ë¯¼íŒ…ê³¼ì • ê°„ë‹¨íˆ êµ¬í˜„í•˜ê¸° (Web3.js)"
subtitle: web3.js / MetaMask / ABI / NFT
categories: typescript
tags: [íƒ€ì…ìŠ¤í¬ë¦½íŠ¸]
---

### NFTë¡œ ë§Œë“¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±

![](https://velog.velcdn.com/images/-__-/post/3549f783-0d5e-40d9-824e-d2dab6e44e29/image.png)

---

### ì´ë¯¸ì§€ Props ì„¤ì • & ì´ë¯¸ì§€ í¬ê¸° ì„¤ì •

```js
import React, { FC } from "react";
import { Image } from "@chakra-ui/react";

interface AnimalCardProps {
  animalType: string;
}

const AnimalCard: FC<AnimalCardProps> = ({ animalType }) => {
  // AnimalCardPropsì„ Propsë¡œ ë°›ëŠ”ë‹¤
  // animalTypeì€ ì–´ë–¤ NFTë¥¼ ë½‘ì•˜ëŠ”ì§€ ì¡°íšŒ
  return (
    <Image w={150} h={150} src={`images/${animalType}.png`} alt="AnimalCard" />
    // animalTypeì„ í†µí•´ NFTì¡°íšŒëœê±¸ ì´ë¯¸ì§€ë¡œ ê·¸ëŒ€ë¡œ ì¶œë ¥í•œë‹¤
  );
};

export default AnimalCard;
```

---

### web3.js ë¥¼ í†µí•´ íŠ¹ì •í•¨ìˆ˜ ê°€ì ¸ì˜¤ê¸° (main.tsx)

- ê°œë°œìëŠ” <span style="background-color:#B5E045; color:#000;">'ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ'</span>ì™€ <span style="background-color:#B5E045; color:#000;">'ABI'</span>ë¥¼ ì•Œë©´ 'web3.js' ë¥¼ í†µí•´
- ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ìƒì„±í•˜ê³  / íŠ¹ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤

```js
import React, { FC, useState } from "react";
import { Box, Text, Flex, Button } from "@chakra-ui/react";
import { mintAnimalTokenContract } from "../contracts";
import AnimalCard from "../components/AnimalCard";

interface MainProps {
  account: string;
}
// TypeScript ëŠ” Propsì˜ íƒ€ì…ì„ ì •í•´ì¤˜ì•¼í•œë‹¤

const Main: FC<MainProps> = ({ account }) => {
  // íƒ€ì…ì„ ì •í•´ì¤¬ìœ¼ë‹ˆ Propsë¥¼ ì‚¬ìš©
  const [newAnimalType, setNewAnimalType] = useState<string>();

  const onClickMint = async () => {
    try {
      if (!account) return; // ê³„ì •ì´ ì—†ëŠ”ê²½ìš°ëŠ” ê·¸ëƒ¥ ë¦¬í„´

      const response = await mintAnimalTokenContract.methods
        // ë³€ìˆ˜ì— ë‹´ëŠ”ê±´ ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë°°í¬í•œ í›„ì— ë‚˜ì˜¤ëŠ” í•¨ìˆ˜ë¥¼
        .mintAnimalToken() // ì¸ì ì…ë ¥ì—†ì´ ì´ í•¨ìˆ˜ë¥¼ í´ë¦­í•˜ë©´ ë¯¼íŠ¸ê°€ ë˜ëŠ” í•¨ìˆ˜ì˜€ë‹¤
        .send({ from: account }); // ëˆ„êµ¬ë¡œ ë¶€í„° ì™”ëŠ”ì§€ ê³„ì •í™•ì¸

      console.log(response); // ğŸ‘‰ ë¯¼íŠ¸ë¥¼ í•˜ë©´ íŠ¸ë™ì­ì…˜ì— ì½˜ì†”ì— ì°íŒë‹¤

      if (response.status === true) {
        // ë¯¼íŠ¸ í›„ì— statusê°€ true ì¼ ê²½ìš°
        const balanceLength = await mintAnimalTokenContract.methods
          // ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë°°í¬í›„ì— ë‚˜ì˜¤ëŠ” í•¨ìˆ˜
          .balanceOf(account) // NFT ê°€ì§€ê³  ìˆëŠ” ê°¯ìˆ˜ ì¡°íšŒ (ì¸ìì—ëŠ” ì£¼ì†Œë¥¼ ë„£ì–´ì•¼í•œë‹¤)
          .call(); // í•¨ìˆ˜ ë¶€ë¥´ê¸°

        const animalTokenId = await mintAnimalTokenContract.methods
          // ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë°°í¬í›„ì— ë‚˜ì˜¤ëŠ” í•¨ìˆ˜
          .tokenOfOwnerByIndex(account, parseInt(balanceLength, 10) - 32)
          // NFTì˜ Id ê°’ì„ ì¡°íšŒ (ì¸ìëŠ” ì£¼ì†Œì™€, ì¡°íšŒí•˜ë ¤ëŠ” ë°°ì—´ìˆœë²ˆ)
          // length - 1 ì€ ë°°ì—´ì˜ ë§ˆì§€ë§‰ì„ ë¶ˆëŸ¬ì˜¨ë‹¤ëŠ” ëœ»
          // í˜„ì¬ ì¤€ë¹„ëœ ì´ë¯¸ì§€ê°€ 5ê°œë°–ì— ì—†ì–´ì„œ ë¯¼íŒ…ëœ ìˆ˜ëŸ‰ì— ë”°ë¼ ì¡°ì ˆí•´ì£¼ë©´ëœë‹¤ -30
          // string íƒ€ì…ì´ê¸° ë•Œë¬¸ì— parseIntë¡œ ìˆ«ìë¡œ í˜•ë³€í™˜ì„ í•´ì¤€ë‹¤, 10ì§„ìˆ˜
          .call(); // í•¨ìˆ˜ ë¶€ë¥´ê¸°
        console.log(animalTokenId);
        const animalType = await mintAnimalTokenContract.methods
          // ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë°°í¬í›„ì— ë‚˜ì˜¤ëŠ” í•¨ìˆ˜
          .animalTypess(animalTokenId)
          // ì–´ë–¤ NFTë¥¼ ë½‘ì•˜ëŠ”ì§€ ì¡°íšŒ (ì¸ìì—ëŠ” NFT idë¥¼ ë„£ëŠ”ë‹¤)
          .call(); // í•¨ìˆ˜ ë¶€ë¥´ê¸°
        console.log(animalType);
        setNewAnimalType(animalType);
        // ìµœì¢…ì ìœ¼ë¡œëŠ” mintë¥¼ í•˜ë©´ ğŸ‘‰ ì–´ë–¤ NFTê°€ ë½‘í˜”ëŠ”ì§€ NFT ì´ë¯¸ì§€ë¥¼ ì¶œë ¥í•´ì£¼ëŠ” useState
      }
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <Flex
      w="full"
      h="100vh"
      justifyContent="center"
      alignItems="center"
      direction="column"
    >
      {/* CSSì™€ ë¹„ìŠ·í•œ ê°œë…ì¸ ì½”ë“œ ì„¼í„°ë¡œ ë§ì¶”ê³  / columnìœ¼ë¡œ ì„¸ë¡œ ë°©í–¥ ì •ë ¬*/}

      <Box>
        {/* AnimalCard ì»´í¬ë„ŒíŠ¸ Propsë¡œ ğŸ‘‰ newAnimalTypeë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë°
      mintë¥¼ í•˜ë©´ ğŸ‘‰ ì–´ë–¤ NFTê°€ ë½‘í˜”ëŠ”ì§€ NFT ì´ë¯¸ì§€ë¥¼ ì¶œë ¥í•´ì£¼ëŠ” useState ì´ë‹¤ */}
        {newAnimalType ? (
          <AnimalCard animalType={newAnimalType} />
        ) : (
          <Text>Let's mint Animal Card!!!</Text>
        )}
        {/* 3í•­ ì—°ì‚°ì */}
      </Box>
      <Button mt={4} size="sm" colorScheme="blue" onClick={onClickMint}>
        Mint
      </Button>
    </Flex>
  );
};

export default Main;

```

---

### mint ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ NFT ìƒì„± êµ¬í˜„

- mint ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ğŸ‘‰ NFTê°€ ìƒì„±ë˜ëŠ”ë° ğŸ‘‰ ìƒì„±ëœ NFTì™€ ì´ë¯¸ì§€ë‘ ì—°ê²°ì‹œì¼œì¤˜ì•¼í•œë‹¤

-1. NFTê°€ ëª‡ê°œ ìƒì„±ë˜ì–´ìˆëŠ”ì§€ ê°¯ìˆ˜ë¥¼ ì¡°íšŒí•œë‹¤

-2. ì œì¼ ìµœì‹ ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ NFT id ê°’ì„ ì¡°íšŒ (length -1)

-3. NFT id ê°’ì„ ì•Œì•„ëƒˆìœ¼ë©´ ğŸ‘‰ idê°’ì„ ì…ë ¥í•˜ì—¬

-4. 1 / 2 / 3 / 4 / 5 ë²ˆì¤‘ì— ì–´ë–¤ NFTë¥¼ ìƒì„±í–ˆëŠ”ì§€ ì¡°íšŒ

-5. ì¡°íšŒëœ NFT 1 ~ 5ë²ˆ ìˆ«ìë¥¼ ğŸ‘‰ ì´ë¯¸ì§€ Propsì— ë‹´ì•„ì¤€ë‹¤

![](https://velog.velcdn.com/images/-__-/post/75bb1ebf-8b9f-4938-9d04-8c9428061f0e/image.gif)

> ğŸ‘† NFT ì™€ ì´ë¯¸ì§€ë‘ ê° ë²ˆí˜¸ì— ë§ê²Œ ì—°ê²°ì‹œì¼œì„œ ì¶œë ¥

---

### ì „ì²´ì½”ë“œ github

<https://github.com/wavescats/mini-project/pull/8/files>

---
