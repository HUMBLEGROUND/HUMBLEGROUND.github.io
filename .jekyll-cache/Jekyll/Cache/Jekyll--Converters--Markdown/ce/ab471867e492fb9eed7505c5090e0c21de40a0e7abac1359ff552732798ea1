I"i/<p><img src="https://velog.velcdn.com/images/-__-/post/b2bd7c08-e005-49d2-be4c-65c7a4351c5f/image.png" alt="" /></p>

<p>React ê¸°ë°˜ì´ë¯€ë¡œ <strong>ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ â€˜CRAâ€™</strong> ë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤</p>

<p><code class="language-plaintext highlighter-rouge">npx create-react-app "ì´ë¦„" â€”template typescript</code></p>

<p>web3ì„ ì„¤ì¹˜í•´ì¤€ë‹¤</p>

<p><code class="language-plaintext highlighter-rouge">npm install web3</code></p>

<hr />

<h3 id="windowethereum-ì¸í„°í˜ì´ìŠ¤-react-app-envdts">window.ethereum ì¸í„°í˜ì´ìŠ¤ (react-app-env.d.ts)</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;reference types="react-scripts" /&gt;</span>

<span class="kr">interface</span> <span class="nx">Window</span> <span class="p">{</span>
  <span class="nl">ethereum</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ğŸ‘‰ Windowë¼ëŠ” ê°ì²´ì— ë©”íƒ€ë§ˆìŠ¤í¬ë¥¼ ì„¤ì¹˜í•˜ë©´ ethereum: any ë¼ëŠ” ì˜¤ë¸Œì íŠ¸ê°€ ìƒê¸´ë‹¤</span>
<span class="c1">// ğŸ‘‰ ë¦¬ì•¡íŠ¸ì—ì„  ì´ê±¸ ì¸ì‹í•˜ì§€ ëª»í•¨</span>
<span class="c1">// ğŸ‘‰ ê·¸ë˜ì„œ ì´ëŸ°ì‹ìœ¼ë¡œ ê°•ì œë¡œ ì ì–´ì£¼ëŠ”ê²ƒì´ë‹¤</span>
</code></pre></div></div>

<hr />

<h3 id="web3js-ë¥¼-í†µí•´-ìŠ¤ë§ˆíŠ¸-ì»¨íŠ¸ë™íŠ¸-ìƒì„±í•˜ê¸°-indexts">web3.js ë¥¼ í†µí•´ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ìƒì„±í•˜ê¸° (index.ts)</h3>

<ul>
  <li>ê°œë°œìëŠ” <span style="background-color:#B5E045; color:#000;">â€˜ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œâ€™</span>ì™€ <span style="background-color:#B5E045; color:#000;">â€˜ABIâ€™</span>ë¥¼ ì•Œë©´ â€˜web3.jsâ€™ ë¥¼ í†µí•´</li>
  <li>ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ìƒì„±í•˜ê³  / íŠ¹ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">AbiItem</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">web3-utils</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Web3</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">web3</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// remix IDE ì—ì„œ ì»´íŒŒì¼ ë°‘ì— ABI ë¥¼ ë³µì‚¬í•´ì˜¨ë‹¤</span>
<span class="kd">const</span> <span class="nx">mintAnimalTokenAbi</span><span class="p">:</span> <span class="nx">AbiItem</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">ABI</span> <span class="nx">ë¶™í˜€ë„£ê¸°</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">saleAnimalTokenAbi</span><span class="p">:</span> <span class="nx">AbiItem</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">ABI</span> <span class="nx">ë¶™í˜€ë„£ê¸°</span><span class="p">];</span>

<span class="c1">// remix IDE ì—ì„œ ë©”íƒ€ë§ˆìŠ¤í¬ë¡œ ê°ê° ë°°í¬í•˜ê³  ë‚˜ì˜¨ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ ë³µì‚¬í•´ì˜¨ë‹¤</span>
<span class="kd">const</span> <span class="nx">mintAnimalTokenAddress</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0x9bADD7AB6c2d6929bf8483Db8aBD9D71EFd49E29</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">saleAnimalTokenAddress</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0x01F1A290D1954f770B4CeF170EBF1DeE474Ceb3F</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">web3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Web3</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ethereum</span><span class="p">);</span>
<span class="c1">// ë©”íƒ€ë§ˆìŠ¤í¬ê°€ ì„¤ì¹˜ë˜ì–´ìˆìœ¼ë©´ ë”°ë¡œ importí•˜ì§€ ì•Šì•„ë„ ì‘ë™í•˜ëŠ” ëª¨ë“ˆ (window.ethereum)</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">mintAnimalTokenContract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
  <span class="c1">// â­ ê°œë°œìëŠ” 'ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ'ì™€ 'ABI'ë¥¼ ì•Œë©´ 'web3.js' ë¥¼ í†µí•´</span>
  <span class="c1">// â­ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ìƒì„±í•˜ê³  / íŠ¹ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤</span>
  <span class="nx">mintAnimalTokenAbi</span><span class="p">,</span>
  <span class="nx">mintAnimalTokenAddress</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">saleAnimalTokenContract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
  <span class="nx">saleAnimalTokenAbi</span><span class="p">,</span>
  <span class="nx">saleAnimalTokenAddress</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

<h3 id="ë¦¬ì•¡íŠ¸ì™€-ë©”íƒ€ë§ˆìŠ¤í¬-ì§€ê°‘-ì—°ê²°-apptsx">ë¦¬ì•¡íŠ¸ì™€ ë©”íƒ€ë§ˆìŠ¤í¬ ì§€ê°‘ ì—°ê²° (App.tsx)</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span><span class="p">,</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">Route</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-router-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Main</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./routes/main</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span><span class="p">:</span> <span class="nx">FC</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">account</span><span class="p">,</span> <span class="nx">setAccount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span> <span class="o">&lt;</span> <span class="nx">string</span> <span class="o">&gt;</span> <span class="dl">""</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">getAccount</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="c1">// try ë¬¸ ì•ˆì˜ ì½”ë“œê°€ ì­‰ ì‹¤í–‰ë˜ê³  ì—ëŸ¬ê°€ ì—†ë‹¤ë©´ catchëŠ” ê±´ë„ˆë›´ë‹¤</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ethereum</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// if ğŸ‘‰ ë©”íƒ€ë§ˆìŠ¤í¬ê°€ ì„¤ì¹˜ë˜ì–´ìˆìœ¼ë©´ ì‹¤í–‰ëœë‹¤</span>
        <span class="kd">const</span> <span class="nx">accounts</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ethereum</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
          <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eth_requestAccounts</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">});</span> <span class="c1">// ì—°ê²°ëœ ë©”íƒ€ë§ˆìŠ¤í¬ì˜ ì£¼ì†Œê°€ ë‚˜ì˜¨ë‹¤</span>
        <span class="c1">// ğŸ‘‰ window.ethereum.request ì„ console.logì— ì°ì–´ë³´ë©´ í™•ì¸í• ìˆ˜ ìˆë‹¤</span>

        <span class="nx">setAccount</span><span class="p">(</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="c1">// ì—°ê²°ëœ ë©”íƒ€ë§ˆìŠ¤í¬ì˜ ì£¼ì†Œë¥¼ useStateì— ë‹´ëŠ”ë‹¤</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// ë©”íƒ€ë§ˆìŠ¤í¬ê°€ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ğŸ‘‰ alert ë¬¸êµ¬ê°€ ë‚˜ì˜¨ë‹¤</span>
        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Install Metamask!</span><span class="dl">"</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ catch ì‹¤í–‰</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span> <span class="c1">// ğŸ‘‰ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ê³  ì¶œë ¥</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">getAccount</span><span class="p">();</span> <span class="c1">// getAccount í•œë²ˆë§Œ ì‹¤í–‰</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Main</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Routes</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/BrowserRouter</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h3 id="ë¦¬ì•¡íŠ¸ì™€-ë©”íƒ€ë§ˆìŠ¤í¬-ì§€ê°‘-ì—°ê²°-êµ¬í˜„">ë¦¬ì•¡íŠ¸ì™€ ë©”íƒ€ë§ˆìŠ¤í¬ ì§€ê°‘ ì—°ê²° êµ¬í˜„</h3>

<p><code class="language-plaintext highlighter-rouge">npm run start</code> ë¥¼ í•˜ë©´</p>

<p><img src="https://velog.velcdn.com/images/-__-/post/34b76109-aa2f-4e2a-8b58-820c77641210/image.png" alt="" /></p>

<blockquote>
  <p>ğŸ‘† ë©”íƒ€ë§ˆìŠ¤í¬ ì§€ê°‘ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ” íŒì—…ì°½ì´ ë‚˜ì˜¤ê³  ì—°ê²°í•  ìˆ˜ ìˆë‹¤</p>
</blockquote>

<hr />

<h3 id="ì „ì²´ì½”ë“œ-github">ì „ì²´ì½”ë“œ github</h3>

<p><a href="https://github.com/wavescats/mini-project/tree/main/Dapp-NFT(MintAnimal)/front-end">https://github.com/wavescats/mini-project/tree/main/Dapp-NFT(MintAnimal)/front-end</a></p>

<hr />

<h3 id="ì°¸ê³ -í–ˆë˜-ì‚¬ì´íŠ¸-">ì°¸ê³  í–ˆë˜ ì‚¬ì´íŠ¸ ğŸ–¥</h3>

<ul>
  <li>
    <p><a href="https://blog.valist.io/how-to-connect-web3-js-to-metamask-in-2020-fee2b2edf58a">https://blog.valist.io/how-to-connect-web3-js-to-metamask-in-2020-fee2b2edf58a</a></p>
  </li>
  <li>
    <p><a href="https://velog.io/@mjlee0326/React%EC%99%80-Web3%EC%9D%98-%EB%A7%8C%EB%82%A8">https://velog.io/@mjlee0326/React%EC%99%80-Web3%EC%9D%98-%EB%A7%8C%EB%82%A8</a></p>
  </li>
</ul>

<hr />
:ET