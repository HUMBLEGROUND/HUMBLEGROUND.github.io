I" 2<p><img src="https://velog.velcdn.com/images/-__-/post/7dbbe54d-4b7a-4b9c-808a-da9174f30a59/image.png" alt="" /></p>

<p><img src="https://velog.velcdn.com/images/-__-/post/06272533-d49e-479a-9bbc-6e416b4fa553/image.png" alt="" /></p>

<p><strong>ë¬´í•œìŠ¤í¬ë¡¤</strong> ì˜ êµ¬í˜„ë°©ì‹ì€ ì—¬ëŸ¬ê°€ì§€ ì…ë‹ˆë‹¤</p>

<p>(infinite-scroll-component / intersection-observer / ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê°ì§€ ë“±)</p>

<p>ì €ëŠ” ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ <strong>â€˜scrollHeightâ€™</strong> ì˜ ë§¨ ë ì§€ì (100) ì— ì™”ì„ë•Œ<br />
ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ 10ê°œì”© ì¶”ê°€ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì„ êµ¬í˜„í•´ë´¤ìŠµë‹ˆë‹¤</p>

<hr />

<h3 id="1-ì„œë²„ì—ì„œ-ë°ì´í„°-ë°›ì•„ì˜¤ê¸°">1. ì„œë²„ì—ì„œ ë°ì´í„° ë°›ì•„ì˜¤ê¸°</h3>

<p><img src="https://velog.velcdn.com/images/-__-/post/c6a3090d-03c9-4ddb-a7c4-936086faef9f/image.png" alt="" /></p>

<blockquote>
  <p>1-1. <strong>fetch</strong> ë˜ëŠ” <strong>Axios</strong> ë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê³ <br />
1-2. useState ë¹ˆë°°ì—´ì„ <strong>â€˜ë‘ê°œ ìƒì„±â€™</strong> í•©ë‹ˆë‹¤<br />
1-3. ë°°ì—´ í•˜ë‚˜ëŠ” ë°ì´í„°ë¥¼ <strong>ë³´ì—¬ì£¼ê³ </strong><br />
1-4. ë°°ì—´ í•˜ë‚˜ëŠ” ë‚¨ì€ ë°ì´í„°ë¥¼ <strong>ì €ì¥í•˜ëŠ”</strong> ìš©ë„ì…ë‹ˆë‹¤</p>
</blockquote>

<hr />

<h3 id="2-ì €ì¥ì†Œì—ì„œ-ë°ì´í„°-êº¼ë‚´ì˜¤ê¸°">2. ì €ì¥ì†Œì—ì„œ ë°ì´í„° êº¼ë‚´ì˜¤ê¸°</h3>

<p><img src="https://velog.velcdn.com/images/-__-/post/d9809590-a3ca-4962-8206-a37a3daf2a70/image.png" alt="" /></p>

<blockquote>
  <p>ğŸ‘† ìŠ¤í¬ë¡¤ì´ <strong>ëª©í‘œìœ„ì¹˜</strong> ì— ë„ë‹¬í–ˆì„ë•Œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ê°€ë¡œ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜<br /></p>

  <p>2-1. ì €ì¥ëœ ë°ì´í„°ê°€ <strong>0ê°œ</strong> ê°€ ì•„ë‹ê²½ìš° ì‹¤í–‰<br />
2-2. ë°°ì—´ì— ë‹´ê¸´ ê°’ì„ 10ê°œì”© êº¼ë‚´ì„œ <strong>ì¶œë ¥</strong> (ëª‡ê°œì”© ì¶œë ¥í• ì§€ëŠ” ì…‹íŒ…)</p>
</blockquote>

<hr />

<h3 id="3-ìŠ¤í¬ë¡¤-ìœ„ì¹˜-ê°ì§€">3. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê°ì§€</h3>

<p><img src="https://velog.velcdn.com/images/-__-/post/157a290a-a9f3-4880-8dc2-60a1a96b45b7/image.png" alt="" /></p>

<p><img src="https://velog.velcdn.com/images/-__-/post/d3123747-7395-4524-865e-0606f174a117/image.png" alt="" /></p>

<blockquote>
  <p>ğŸ‘† ìŠ¤í¬ë¡¤ì˜ <strong>ìœ„ì¹˜ë¥¼ ê°ì§€</strong>í•˜ê³  ì¡°ê±´ì— ë§Œì¡±í•˜ë©´ ë°ì´í„°ë¥¼ <strong>êº¼ë‚´ì˜¤ëŠ”</strong> í•¨ìˆ˜ë¥¼ ì‹¤í–‰<br /></p>

  <p>â­ <strong>scrollTop + clientHeight &gt;= scrollHeight</strong></p>
</blockquote>

<hr />

<h3 id="4-ìŠ¤í¬ë¡¤-ì´ë²¤íŠ¸-ë“±ë¡--ì‚­ì œ">4. ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë“±ë¡ &amp; ì‚­ì œ</h3>

<p><img src="https://velog.velcdn.com/images/-__-/post/5567e533-8f9a-455c-88c5-e6a2ff5a9204/image.png" alt="" /></p>

<blockquote>
  <p>ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ê°ì§€í• ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  &amp; ì‚­ì œ<br /></p>

  <p><strong>addEventListener</strong> / <strong>removeEventListener</strong></p>
</blockquote>

<hr />

<h3 id="5-ë¬´í•œìŠ¤í¬ë¡¤-êµ¬í˜„">5. ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„</h3>

<p><img src="https://velog.velcdn.com/images/-__-/post/1be1d703-26bf-4365-a3f2-c1338eec13a2/image.gif" alt="" /></p>

<blockquote>
  <p>10ê°œì”© ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” <strong>ë¬´í•œìŠ¤í¬ë¡¤</strong></p>
</blockquote>

<hr />

<blockquote>
  <h3 id="ë¬´í•œìŠ¤í¬ë¡¤-êµ¬í˜„ì—-ì„±ê³µí•œ-ì½”ë“œ-">ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„ì— ì„±ê³µí•œ ì½”ë“œ ğŸ‘‡</h3>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">poolList</span><span class="p">,</span> <span class="nx">setPoolList</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">savePoolList</span><span class="p">,</span> <span class="nx">setSavePoolList</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span> <span class="nx">setIsLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">poolData</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ì¤‘ì—ëŠ” ë¡œë”©ì¤‘ í‘œì‹œ</span>
    <span class="nx">fetch</span><span class="p">(</span>
      <span class="dl">"</span><span class="s2">https://gateway.pinata.cloud/ipfs/QmNYomgBofjWrYkkdWQA2KTqkv8HxMe3iwFsYScGCkX16K</span><span class="dl">"</span>
    <span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setPoolList</span><span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ 10ê°œë§Œ ë³´ì—¬ì£¼ê³ </span>
        <span class="nx">setSavePoolList</span><span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span> <span class="c1">// ë³´ì—¬ì£¼ëŠ” ë°ì´í„° 10ê°œ ì œì™¸í•œ ë‚˜ë¨¸ì§€ëŠ” ë¹ˆë°°ì—´ì— ì €ì¥</span>
        <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// ë°ì´í„°ë¥¼ ë‹¤ ë¶ˆëŸ¬ì™”ìœ¼ë©´ ë¡œë”©ì¤‘ ë</span>
      <span class="p">});</span>
  <span class="p">};</span>
  <span class="nx">poolData</span><span class="p">();</span>
<span class="p">},</span> <span class="p">[]);</span>

<span class="kd">const</span> <span class="nx">poolSaveData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ê°€ë¡œ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜ (ë¹„ë™ê¸°ì²˜ë¦¬)</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">savePoolList</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// useState ë°°ì—´ì— ì €ì¥ëœ ê¸¸ì´ê°€ 0ì´ ì•„ë‹ê²½ìš° ì‹¤í–‰</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ì¤‘ì—ëŠ” ë¡œë”©ì¤‘ í‘œì‹œ</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// ë°”ë¡œ ì‹¤í–‰í•˜ì§€ë§ê³  1ì´ˆ ë’¤ì— ì‹¤í–‰ì‹œí‚¤ê¸°</span>
      <span class="nx">setPoolList</span><span class="p">([...</span><span class="nx">poolList</span><span class="p">,</span> <span class="p">...</span><span class="nx">savePoolList</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]);</span>
      <span class="c1">// ì„œë²„ì— ë‹´ê¸´ ê°’, ì €ì¥ëœ ë°ì´í„° 10ê°œ êº¼ë‚´ê¸°</span>
      <span class="nx">setSavePoolList</span><span class="p">(</span><span class="nx">savePoolList</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span> <span class="c1">// ì €ì¥ëœ ë°ì´í„° 10ê°œ ì¶œë ¥</span>
      <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// ë°ì´í„°ë¥¼ ë‹¤ ë¶ˆëŸ¬ì™”ìœ¼ë©´ ë¡œë”©ì¤‘ ë</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span> <span class="c1">// ğŸ‘‰ 1ì´ˆ</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">infiniteScroll</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//ìŠ¤í¬ë¡¤ ë†’ì´ë¥¼ ê°ì§€í•´ì„œ ğŸ‘‰ ì¡°ê±´ì— ë§Œì¡±í•˜ë©´ poolSaveData í•¨ìˆ˜ í˜¸ì¶œ</span>
  <span class="kd">let</span> <span class="nx">scrollHeight</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">,</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollHeight</span>
  <span class="p">);</span>
  <span class="kd">let</span> <span class="nx">scrollTop</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span>
  <span class="p">);</span>
  <span class="kd">let</span> <span class="nx">clientHeight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>

  <span class="nx">scrollHeight</span> <span class="o">-=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// ìŠ¤í¬ë¡¤ì´ ë§¨ ë ì§€ì (100)ì— ì™”ì„ë•Œ</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">scrollTop</span> <span class="o">+</span> <span class="nx">clientHeight</span> <span class="o">&gt;=</span> <span class="nx">scrollHeight</span> <span class="o">&amp;&amp;</span> <span class="nx">isLoading</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">poolSaveData</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">isLoading</span><span class="p">]);</span>

<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">scroll</span><span class="dl">"</span><span class="p">,</span> <span class="nx">infiniteScroll</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">// ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë“±ë¡</span>
  <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">scroll</span><span class="dl">"</span><span class="p">,</span> <span class="nx">infiniteScroll</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">//ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ì‚­ì œ</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">infiniteScroll</span><span class="p">]);</span>
</code></pre></div></div>

<hr />

<h3 id="ì°¸ê³ -í–ˆë˜-ì‚¬ì´íŠ¸-">ì°¸ê³  í–ˆë˜ ì‚¬ì´íŠ¸ ğŸ–¥</h3>

<ul>
  <li>
    <p><a href="https://kingso.netlify.app/posts/react-infinite-scroll/">https://kingso.netlify.app/posts/react-infinite-scroll/</a></p>
  </li>
  <li>
    <p><a href="https://chaechaes-itlab.tistory.com/4?category=966493">https://chaechaes-itlab.tistory.com/4?category=966493</a></p>
  </li>
  <li>
    <p><a href="https://velog.io/@dev_marco/%EB%AC%B4%ED%95%9C-%EC%8A%A4%ED%81%AC%EB%A1%A4Infinite-Scroll">https://velog.io/@dev_marco/%EB%AC%B4%ED%95%9C-%EC%8A%A4%ED%81%AC%EB%A1%A4Infinite-Scroll</a></p>
  </li>
</ul>

<hr />
:ET